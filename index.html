<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Teen.zen â€“ Landing Page with Chatbot</title>
  <style>
    * {
      box-sizing: border-box;
    }
    body, html {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: Arial, sans-serif;
      background-color: #f5f3f0; /* light background like the second page */
    }

    /* === HERO SECTION === */
    .container {
      position: relative;
      height: 100vh;
      overflow: hidden;
    }
    video.background {
      position: absolute;
      top: 0;
      left: 0;
      object-fit: cover;
      width: 100%;
      height: 100%;
      z-index: -1;
    }
    .overlay {
      position: relative;
      background-color: rgba(0, 0, 0, 0.4);
      color: white;
      height: 100%;
      padding: 60px 24px;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }
    .logo {
      font-size: 14px;
      font-weight: bold;
      text-transform: uppercase;
      line-height: 20px;
      margin-bottom: 30px;
    }
    .heading {
      font-size: 26px;
      font-weight: bold;
      line-height: 36px;
      margin-bottom: 20px;
    }
    .description {
      font-size: 14px;
      font-weight: 500;
      line-height: 22px;
      margin-bottom: 40px;
    }
    .button {
      border: 1.5px solid white;
      padding: 12px 30px;
      border-radius: 30px;
      background-color: transparent;
      color: white;
      font-weight: bold;
      letter-spacing: 1px;
      width: fit-content;
      cursor: pointer;
    }

    /* === CHAT WIDGET === */
    .chat-button {
      position: absolute;
      bottom: 20px;
      right: 20px;
      z-index: 10;
      background: white;
      color: black;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      font-size: 24px;
      border: none;
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    }
    .chat-window {
      position: absolute;
      bottom: 80px;
      right: 20px;
      width: 300px;
      max-height: 400px;
      background: white;
      border-radius: 10px;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    }
    .chat-messages {
      flex: 1;
      padding: 10px;
      overflow-y: auto;
      font-size: 14px;
    }
    .chat-input {
      display: flex;
      border-top: 1px solid #ddd;
    }
    .chat-input input {
      flex: 1;
      border: none;
      padding: 10px;
      font-size: 14px;
      outline: none;
    }
    .chat-input button {
      border: none;
      background: #007bff;
      color: white;
      padding: 10px 15px;
      cursor: pointer;
    }
    .message-bot {
      background-color: #f1f1f1;
      padding: 8px;
      border-radius: 8px;
      margin-bottom: 6px;
    }
    .message-user {
      background-color: #cce5ff;
      padding: 8px;
      border-radius: 8px;
      margin-bottom: 6px;
      align-self: flex-end;
    }

    /* === SECOND SECTION (podcast-style layout) === */
    .info-section {
      max-width: 1200px;
      margin: 0 auto;
      padding: 80px 40px 120px;
      display: flex;
      gap: 80px;
      align-items: flex-start;
    }
    .info-text {
      flex: 1;
      font-size: 16px;
      line-height: 1.6;
    }
    .info-text p {
      margin-bottom: 24px;
    }
    .info-media {
      flex: 1.2;
      display: flex;
      flex-direction: column;
      gap: 24px;
    }
    .info-media img {
      width: 100%;
      height: auto;
      display: block;
    }
    .info-divider {
      border: none;
      border-top: 3px solid #000;
      margin: 24px 0 8px;
    }
    .info-heading {
      font-size: 28px;
      font-weight: 700;
      margin: 0 0 24px;
    }
    .info-platforms {
      display: flex;
      flex-wrap: wrap;
      gap: 32px;
      font-weight: 700;
      font-size: 14px;
      letter-spacing: 0.1em;
    }
    .info-platforms span {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    @media (max-width: 900px) {
      .info-section {
        flex-direction: column;
        padding: 60px 24px 80px;
      }
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <!-- React (production builds) -->
  <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
  <!-- Babel so the browser can understand JSX -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <script type="text/babel">
    const { useState } = React;

    const Chatbot = () => {
      const [open, setOpen] = useState(false);
      const [messages, setMessages] = useState([
        { text: "Hi! I'm your assistant. How can I help?", sender: "bot" }
      ]);
      const [input, setInput] = useState("");

      const sendMessage = async () => {
        if (!input.trim()) return;

        const text = input;
        setInput("");

        setMessages(prev => [...prev, { text, sender: "user" }]);

        try {
          const res = await fetch("http://localhost:3000/api/message", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ prompt: text })
          });

          let botText = "Thanks for your message! (demo reply â€“ backend not connected yet.)";

          if (res.ok) {
            const data = await res.json();
            if (data && typeof data.response === "string" && data.response.trim()) {
              botText = data.response.trim();
            }
          }

          setMessages(prev => [...prev, { text: botText, sender: "bot" }]);
        } catch (err) {
          console.error(err);
          setMessages(prev => [
            ...prev,
            { text: "Error contacting server. Using demo reply instead.", sender: "bot" }
          ]);
        }
      };

      return (
        <>
          <button className="chat-button" onClick={() => setOpen(o => !o)}>ðŸ’¬</button>
          {open && (
            <div className="chat-window">
              <div className="chat-messages">
                {messages.map((msg, i) => (
                  <div
                    key={i}
                    className={msg.sender === "bot" ? "message-bot" : "message-user"}
                  >
                    {msg.text}
                  </div>
                ))}
              </div>
              <div className="chat-input">
                <input
                  value={input}
                  onChange={e => setInput(e.target.value)}
                  onKeyDown={e => e.key === "Enter" && sendMessage()}
                  placeholder="Type a message..."
                />
                <button onClick={sendMessage}>âž¤</button>
              </div>
            </div>
          )}
        </>
      );
    };

    const InfoSection = () => (
      <section className="info-section">
        <div className="info-text">
          <p>
            Write a paragraph that talks about your video podcast here.
            Why should your prospective listeners tune in? Is it because
            of your relatable personality, your subject matter expertise,
            or your quirky sense of humor? Whichever reason, be sure to
            highlight it here.
          </p>
          <p>
            Write a paragraph that talks about your video podcast here.
            Why should your prospective listeners tune in? Is it because
            of your relatable personality, your subject matter expertise,
            or your quirky sense of humor? Whichever reason, be sure to
            highlight it here.
          </p>
        </div>

        <div className="info-media">
          <img src="assets/img/podcast.jpg" alt="img/podcast" />
          <hr className="info-divider" />
          <h2 className="info-heading">Start Chatting</h2>
          <div className="info-platforms">
            <span>ðŸŽ§ SPOTIFY</span>
            <span>ï£¿ APPLE PODCAST</span>
            <span>ðŸ…– GOOGLE PODCAST</span>
          </div>
        </div>
      </section>
    );

    const App = () => (
      <>
        {/* Hero / video section */}
        <div className="container">
          <video autoPlay muted loop className="background">
            <source src="assets/vid/background.mp4" type="video/mp4" />
            Your browser does not support the video tag.
          </video>

          <div className="overlay">
            <div className="logo">YOUR LIFE,<br/>YOUR BUILD</div>
            <div className="heading">
              Navigating life isn't easy,<br/>
              but you don't have to do it alone.
            </div>
            <div className="description">
              In our technology, we talk about how we<br/>
              can become better, happier, and healthier.
            </div>
            <button className="button">SUBSCRIBE</button>
          </div>

          <Chatbot />
        </div>

        {/* Second section (scroll down) */}
        <InfoSection />
      </>
    );

    const root = ReactDOM.createRoot(document.getElementById("root"));
    root.render(<App />);
  </script>
</body>
</html>
